/*!
 * Carty - v0.1.0 - 2015-03-07
 * http://sorgalla.com/carty/
 * Copyright (c) 2015 Jan Sorgalla; Licensed MIT
 */
!function(n){function t(e){if(r[e])return r[e].exports;var u=r[e]={exports:{},id:e,loaded:!1};return n[e].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=n,t.c=r,t.p="/",t(0)}([function(n,t,r){var e=r(1),u=r(2),i=e;i.item=u,n.exports=i},function(n,t,r){"use strict";function e(n){function t(){return b.slice(0)}function r(n,r){(n||r)&&(h=h.then(n?function(){return n(t)}:null,r?function(n){return r(n,t)}:null))}function e(){return l(x?x.load():[]).then(function(n){b=n.map(function(n){return f(n)})})}function d(n){var t,r=!1;try{t=f(n)}catch(e){return!1}return b.every(function(n,e){return t.equals(n)&&(r={item:n,index:e}),!r}),r}function y(n){var r=f(n);if(j("add",r)){var e=d(r);return e&&(r=f(u({},e.item(),r(),{quantity:e.item.quantity()+r.quantity()}))),r.quantity()<1?v(r):(e?b[e.index]=r:b.push(r),l(x?x.add(r,t):null).then(j.bind(t,"added",r),function(n){return j("addfailed",n,r),s(n)}))}}function v(n){var r=d(n);if(r&&j("remove",r.item))return b.splice(r.index,1),l(x?x.remove(r.item,t):null).then(j.bind(t,"removed",r.item),function(n){return j("removefailed",n,r.item),s(n)})}function m(){return j("clear")?(b.length=0,l(x?x.clear():null).then(j.bind(t,"cleared"),function(n){return j("clearfailed",n),s(n)})):void 0}var g=u({},p,n),x=g.store,b=[],h=e(),j=i(t);return t.ready=function(n){return r(n),t},t.error=function(n){return r(null,n),t},t.option=c.bind(t,g),t.size=function(){return b.length},t.has=function(n){return!!d(n)},t.get=function(n){var t=d(n);return t?t.item:null},t.add=function(n){return r(y.bind(t,n)),t},t.remove=function(n){return r(v.bind(t,n)),t},t.clear=function(){return r(m),t},t.each=function(n,r){return b.every(function(e,u){return!1!==n.call(r,e,u,t)}),t},t.quantity=function(){return t().reduce(function(n,t){return n+t.quantity()},0)},t.total=function(){return t().reduce(function(n,t){return n+t.price()*t.quantity()},0)},t.currency=function(){return g.currency},t.shipping=function(){return t.size()?t().reduce(function(n,t){return n+t.shipping()},o(a(g.shipping,t))):0},t.tax=function(){return t.size()?t().reduce(function(n,t){return n+t.tax()},o(a(g.tax,t))):0},t.grandTotal=function(){return t.total()+t.tax()+t.shipping()},t}var u=r(8),i=r(3),o=r(4),c=r(5),a=r(6),f=r(2),l=Promise.resolve.bind(Promise),s=Promise.reject.bind(Promise),p={store:null,currency:"USD",shipping:null,tax:null};e.option=c.bind(e,p),n.exports=e},function(n,t,r){function e(n){function t(){return u({},r)}if("function"===o(n)&&(n=n()),"string"===o(n)&&(n={id:n}),!n.id)throw"Item must be a string or an object with at least an id property.";var r=u({},c,n);return t.id=function(){return r.id},t.label=function(){return r.label||r.id},t.quantity=function(){return i(r.quantity)},t.price=function(){return i(r.price)},t.currency=function(){return r.currency},t.shipping=function(){return i(r.shipping)},t.tax=function(){return i(r.tax)},t.equals=function(n){try{return e(n).id()===t.id()}catch(r){return!1}},t}var u=r(8),i=r(4),o=r(7),c={quantity:1,price:0,currency:null,shipping:0,tax:0};n.exports=e},function(n){"use strict";n.exports=function(n){var t={};return n.on=function(r,e){return(t["$"+r]=t["$"+r]||[]).push(e),n},n.once=function(t,r){function e(){n.off(t,e),r.apply(n,arguments)}return e.fn=r,n.on(t,e),n},n.off=function(r,e){if(0==arguments.length)return t={},n;var u=t["$"+r];if(!u)return n;if(1==arguments.length)return delete t["$"+r],n;for(var i,o=0;o<u.length;o++)if(i=u[o],i===e||i.fn===e){u.splice(o,1);break}return n},function(r){var e=[].slice.call(arguments,1),u=t["$"+r],i=!0;if(u){u=u.slice(0);for(var o=0,c=u.length;c>o;++o)u[o].apply(n,e)||(i=!1)}return i}}},function(n){n.exports=function(n,t){var r=parseFloat(n);if(isFinite(r))return r;var e=""+n;if(!t){var u=e.indexOf("."),i=e.indexOf(",");t=".",u>-1&&i>-1&&i>u&&(t=",")}var o=new RegExp("[^0-9-"+t+"]",["g"]);return parseFloat(e.replace(/\(([^-]+)\)/,"-$1").replace(o,"").replace(t,"."))||0}},function(n,t,r){var e=r(8),u=r(7);n.exports=function(n,t){return 1===arguments.length?e(!0,{},n):t&&"undefined"!==u(n[t])?n[t]:null}},function(n,t,r){var e=r(7);n.exports=function u(u,n,t){return"function"===e(u)?u.apply(n,t||[]):u}},function(n){var t={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};n.exports=function(n){var r=Object.prototype.toString.call(n);return t[r]?t[r]:null===n?"null":void 0===n?"undefined":n===Object(n)?"object":typeof n}},function(n){var t,r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,u=function(n){"use strict";if(!n||"[object Object]"!==e.call(n))return!1;var u=r.call(n,"constructor"),i=n.constructor&&n.constructor.prototype&&r.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!u&&!i)return!1;var o;for(o in n);return o===t||r.call(n,o)};n.exports=function i(){"use strict";var n,r,e,o,c,a,f=arguments[0],l=1,s=arguments.length,p=!1;for("boolean"==typeof f?(p=f,f=arguments[1]||{},l=2):("object"!=typeof f&&"function"!=typeof f||null==f)&&(f={});s>l;++l)if(n=arguments[l],null!=n)for(r in n)e=f[r],o=n[r],f!==o&&(p&&o&&(u(o)||(c=Array.isArray(o)))?(c?(c=!1,a=e&&Array.isArray(e)?e:[]):a=e&&u(e)?e:{},f[r]=i(p,a,o)):o!==t&&(f[r]=o));return f}}]);