!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.carty=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){function b(){return r.slice(0)}function c(){return q&&q.enabled()?q.load(function(a){r=a.map(function(a){return i(a)})}):void 0}function k(){return s("save")?q&&q.enabled()?void q.save(r.map(function(a){return a()}),function(){s("saved")}):s("saved"):void 0}function l(){return s("clear")?(r.length=0,q&&q.enabled()?void q.clear(function(){s("cleared")}):s("cleared")):void 0}function m(a){var b,c=!1;try{b=i(a)}catch(d){return!1}return r.every(function(a,d){return b.equals(a)&&(c={item:a,index:d}),!c}),c}function n(a){var b=i(a);if(s("add",b)){var c=m(b);if(c&&(b=i(d({},c.item(),b(),{quantity:c.item.quantity()+b.quantity()}))),b.quantity()<=0)return o(b);c?r[c.index]=b:r.push(b),k(),s("added",b)}}function o(a){var b=m(a);b&&s("remove",b.item)&&(r.splice(b.index,1),k(),s("removed",b.item))}var p=d({},j,a),q=p.store,r=[],s=e(b);return b.option=g.bind(b,p),b.size=function(){return r.length},b.has=function(a){return!!m(a)},b.get=function(a){var b=m(a);return b?b.item:null},b.add=function(a){return n(a),b},b.remove=function(a){return o(a),b},b.clear=function(){return l(),b},b.each=function(a,c){return r.every(function(d,e){return!1!==a.call(c,d,e,b)}),b},b.quantity=function(){return b().reduce(function(a,b){return a+b.quantity()},0)},b.total=function(){return b().reduce(function(a,b){return a+b.price()*b.quantity()},0)},b.shipping=function(){return b.size()?b().reduce(function(a,b){return a+b.shipping()},f(h(p.shipping,b))):0},b.tax=function(){return b.size()?b().reduce(function(a,b){return a+b.tax()},f(h(p.tax,b))):0},b.grandTotal=function(){return b.total()+b.tax()+b.shipping()},c(),b}var d=a("extend"),e=a("./util/emitter"),f=a("./util/toFloat"),g=a("./util/getOption"),h=a("./util/getValue"),i=a("./item"),j={store:null,currency:"USD",shipping:null,tax:null};c.option=g.bind(c,j),b.exports=c},{"./item":3,"./util/emitter":5,"./util/getOption":6,"./util/getValue":8,"./util/toFloat":9,extend:4}],2:[function(a,b){var c=a("./cart"),d=a("./item"),e=c;e.item=d,b.exports=e},{"./cart":1,"./item":3}],3:[function(a,b){function c(a){function b(){return d({},g)}if("function"===f(a)&&(a=a()),"string"===f(a)&&(a={id:a}),!a.id)throw"Item must be a string or an object with at least an id property.";var g=d({},h,a);return b.id=function(){return g.id},b.label=function(){return g.label||g.id},b.quantity=function(){return e(g.quantity)},b.price=function(){return e(g.price)},b.currency=function(){return g.currency},b.shipping=function(){return e(g.shipping)},b.tax=function(){return e(g.tax)},b.equals=function(a){try{return c(a).id()===b.id()}catch(d){return!1}},b}var d=a("extend"),e=a("./util/toFloat"),f=a("./util/getType"),g=a("./util/getOption"),h={quantity:1,price:0};c.option=g.bind(c,h),b.exports=c},{"./util/getOption":6,"./util/getType":7,"./util/toFloat":9,extend:4}],4:[function(a,b){var c,d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){"use strict";if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!f)return!1;var g;for(g in a);return g===c||d.call(a,g)};b.exports=function g(){"use strict";var a,b,d,e,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});l>k;++k)if(a=arguments[k],null!=a)for(b in a)d=j[b],e=a[b],j!==e&&(m&&e&&(f(e)||(h=Array.isArray(e)))?(h?(h=!1,i=d&&Array.isArray(d)?d:[]):i=d&&f(d)?d:{},j[b]=g(m,i,e)):e!==c&&(j[b]=e));return j}},{}],5:[function(a,b){"use strict";b.exports=function(a){var b={};return a.on=function(c,d){return(b["$"+c]=b["$"+c]||[]).push(d),a},a.once=function(b,c){function d(){a.off(b,d),c.apply(a,arguments)}return d.fn=c,a.on(b,d),a},a.off=function(c,d){if(0==arguments.length)return b={},a;var e=b["$"+c];if(!e)return a;if(1==arguments.length)return delete b["$"+c],a;for(var f,g=0;g<e.length;g++)if(f=e[g],f===d||f.fn===d){e.splice(g,1);break}return a},function(c){var d=[].slice.call(arguments,1),e=b["$"+c],f=!0;if(e){e=e.slice(0);for(var g=0,h=e.length;h>g;++g)e[g].apply(a,d)||(f=!1)}return f}}},{}],6:[function(a,b){var c=a("extend"),d=a("./getType");b.exports=function(a,b){return 1===arguments.length?c(!0,{},a):b&&"undefined"!==d(a[b])?a[b]:null}},{"./getType":7,extend:4}],7:[function(a,b){var c={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};b.exports=function(a){var b=Object.prototype.toString.call(a);return c[b]?c[b]:null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}},{}],8:[function(a,b){var c=a("./getType");b.exports=function(a,b,d){return"function"===c(a)?a.apply(b,d||[]):a}},{"./getType":7}],9:[function(a,b){b.exports=function(a,b){var c=parseFloat(a);if(isFinite(c))return c;var d=""+a;if(!b){var e=d.indexOf("."),f=d.indexOf(",");b=".",e>-1&&f>-1&&f>e&&(b=",")}var g=new RegExp("[^0-9-"+b+"]",["g"]);return parseFloat(d.replace(/\(([^-]+)\)/,"-$1").replace(g,"").replace(b,"."))||0}},{}]},{},[2])(2)});